{
  "title": "Scraper configuration",
  "description": "Contains configuration data and scraping tree logic for Webscraper",
  "required": [ "version", "start", "parsetree", "windowsizes", "driver"],
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "description": "Define version of scraping language",
      "enum": ["v1"]
    },
    "proxies": {
       "description": "List of proxy ip adresses in 127.0.0.1:4321 format",
       "type": "array",
       "items": {
         "type": "string",
         "pattern": "^[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}:[0-9]{1,5}$"
       }
    },
    "driver": {
      "description": "Which browser we should use",
      "type": "string",
      "enum": ["chrome", "firefox"]
    },
    "threads": {
      "description": "Maximum number of threads working",
      "type": "integer",
      "minimum": 0
    },
    "timeout": {
      "description": "Array with minimum and maximum values of delay between downloading webpages in ms",
      "type": "array",
      "items": {
        "type": "integer",
        "minimum": 0
      },
      "minItems": 2,
      "maxItems": 2
    },
    "windowsizes": {
      "description": "first page",
      "type": "array",
      "minItems": 1,
      "items" :{
        "type": "string",
        "pattern": "^[0-9]+,[0-9]+$"
      }
    },
    "start": {
      "description": "array of different sizes of headless browser",
      "type": "string",
      "pattern": "^https?://"
    },
    "parsetree": {
      "description": "Definition of nodes of parsing logic",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "nextselector": {
            "description": "css selector to find next link in html code. if missing not jumping",
            "type": "object",
            "properties": {
              "link": {
                "type": "string"
              },
              "clickseries": {
                "type": "array",
                "description": "if content is rednered by JS, this is array of chain CSS selectors where to be clicked to display links",
                "items": {
                  "type": "string"
                }
              }
          }},
          "pageselector": {
            "description": "css selector to find pagging link in html code. if missing not jumping",
            "type": "object",
            "properties": {
              "link": {
                "type": "string"
              },
              "clickseries": {
                "type": "array",
                "description": "if content is rednered by JS, this is array of chain CSS selectors where to be clicked to display links",
                "items": {
                  "type": "string"
                }
              }
            }
          },
          "contselector": {
            "description": "css selector to find content to be harvested",
            "type": "object",
            "properties": {
              "link": {
                "type": "string"
              },
              "clickseries": {
                "type": "array",
                "description": "if content is rednered by JS, this is array of chain CSS selectors where to be clicked to display links",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    }
  }
}
